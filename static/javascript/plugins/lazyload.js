window.MT=window.MT||{},window.MT.lazyloadIndex=0,function(a,b,c,d){var e=a(b);a.fn.lazyload=function(f){function g(){var b=0;i.each(function(){var c=a(this);if(!j.skip_invisible||c.is(":visible"))if(a.abovethetop(this,j)||a.leftofbegin(this,j));else if(a.belowthefold(this,j)||a.rightoffold(this,j)){if(++b>j.failure_limit)return!1}else c.trigger("appear"),b=0})}var h,i=this,j={threshold:100,failure_limit:10,event:"scroll",effect:"fadeIn",container:b,data_attribute:"src",skip_invisible:!0,appear:null,load:null,ajax:!1};return f&&(d!==f.failurelimit&&(f.failure_limit=f.failurelimit,delete f.failurelimit),d!==f.effectspeed&&(f.effect_speed=f.effectspeed,delete f.effectspeed),a.extend(j,f)),h=j.container===d||j.container===b?e:a(j.container),0===j.event.indexOf("scroll")&&h.bind(j.event,function(a){return g()}),this.each(function(){var c=this,d=a(c);c.loaded=!1,d.one("appear",function(){if(!this.loaded){var e=d.data(j.data_attribute);if(e){if(-1!=e.indexOf("i2.etosun.com")&&(b.MT.lazyloadIndex%2==0&&(e=e.replace("i2.etosun.com","mt-share.qiniudn.com")),b.MT.lazyloadIndex%3==0&&(e=e.replace("i2.etosun.com","i3.etosun.com"))),b.MT.lazyloadIndex++,j.appear){var f=i.length;j.appear.call(c,f,j)}var g=new Image;g.onload=function(){d.css("opacity",0).removeAttr("height").attr("src",d.data(j.data_attribute)).animate({opacity:1},j.effect_speed).parent("a").removeAttr("style"),c.loaded=!0;var b=a.grep(i,function(a){return!a.loaded});if(i=a(b),j.load){{i.length}j.load.call(d,g.height,g.width)}g=null},g.src=e}}}),0!==j.event.indexOf("scroll")&&d.bind(j.event,function(a){c.loaded||d.trigger("appear")})}),e.bind("resize",function(a){g()}),/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(b){b.originalEvent.persisted&&i.each(function(){a(this).trigger("appear")})}),a(c).ready(function(){g()}),j.ajax&&g(),this},a.belowthefold=function(c,f){var g;return g=f.container===d||f.container===b?e.height()+e.scrollTop():a(f.container).offset().top+a(f.container).height(),g<=a(c).offset().top-f.threshold},a.rightoffold=function(c,f){var g;return g=f.container===d||f.container===b?e.width()+e.scrollLeft():a(f.container).offset().left+a(f.container).width(),g<=a(c).offset().left-f.threshold},a.abovethetop=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollTop():a(f.container).offset().top,g>=a(c).offset().top+f.threshold+a(c).height()},a.leftofbegin=function(c,f){var g;return g=f.container===d||f.container===b?e.scrollLeft():a(f.container).offset().left,g>=a(c).offset().left+f.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightoffold(b,c)||a.leftofbegin(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[":"],{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return!a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return!a.rightoffold(b,{threshold:0})}})}(jQuery,window,document);